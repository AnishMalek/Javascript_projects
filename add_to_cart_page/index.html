<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Side Cart Final Working</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background:#f5f5f5;
}

/* PRODUCT IMAGE */
.product-img{
    width:100%;
    height:200px;
    object-fit:cover;
    border-radius:8px;
}

/* CART BUTTON */
.cart-btn{
    position:fixed;
    top:15px;
    right:15px;
    z-index:2000;
}

.shadow-sm{
    width: 80%;
    height: 350px;
}

/* SIDE CART */
.side-cart{
    position:fixed;
    top:0;
    right:-360px;
    width:360px;
    height:100%;
    background:#fff;
    box-shadow:-5px 0 20px rgba(0,0,0,.3);
    transition:.3s;
    z-index:1500;
    display:flex;
    flex-direction:column;
}

.side-cart.active{
    right:0;
}

.cart-header{
    background:#000;
    color:#fff;
    padding:15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.cart-items{
    flex:1;
    overflow-y:auto;
    padding:10px;
}

.cart-footer{
    border-top:1px solid #ddd;
    padding:15px;
}

.cart-img{
    width:50px;
    height:50px;
    object-fit:cover;
    border-radius:5px;
}

.qty-btn{
    width:26px;
    height:26px;
    padding:0;
}
</style>
</head>

<body>

<!-- CART BUTTON -->
<button id="cartBtn" class="btn btn-dark cart-btn">
    ðŸ›’ Cart (<span id="cartCount">0</span>)
</button>

<!-- PRODUCTS -->
<div class="container py-5">
    <h3 class="fw-bold mb-4">Products</h3>

    <div class="row g-4">

        <!-- PRODUCT 1 -->

         <div class="col-md-4">
            <div class="card p-2 shadow-sm">
                <img src="mug.webp" class="product-img">
                <h5 class="mt-2">Tea Mug</h5>
                <p class="text-muted">â‚¹599</p>
                <button class="btn btn-dark w-100 addCart"
                    data-id="5"
                    data-name="Tea Mug"
                    data-price="599"
                    data-img="mug.webp">
                    Add to Cart
                </button>
            </div>
        </div>

        <!-- PRODUCT 2 -->
        <div class="col-md-4">
            <div class="card p-2 shadow-sm">
                <img src="sunglasses.webp" class="product-img">
                <h5 class="mt-2">Sunglasses</h5>
                <p class="text-muted">â‚¹1899</p>
                <button class="btn btn-dark w-100 addCart"
                    data-id="2"
                    data-name="Sunglasses"
                    data-price="1899"
                    data-img="sunglasses.webp">
                    Add to Cart
                </button>
            </div>
        </div>

        <!-- PRODUCT 3 -->
        <div class="col-md-4">
            <div class="card p-2 shadow-sm">
                <img src="shoes.webp" class="product-img">
                <h5 class="mt-2">Shoes</h5>
                <p class="text-muted">â‚¹1599</p>
                <button class="btn btn-dark w-100 addCart"
                    data-id="3"
                    data-name="Shoes"
                    data-price="1599"
                    data-img="shoes.webp">
                    Add to Cart
                </button>
            </div>
        </div>

        <!-- PRODUCT 4 -->
        <div class="col-md-4">
            <div class="card p-2 shadow-sm">
                <img src="backpack.webp" class="product-img">
                <h5 class="mt-2">Backpack</h5>
                <p class="text-muted">â‚¹1399</p>
                <button class="btn btn-dark w-100 addCart"
                    data-id="4"
                    data-name="Backpack"
                    data-price="1399"
                    data-img="backpack.webp">
                    Add to Cart
                </button>
            </div>
        </div>

        <!-- PRODUCT 5 -->

         <div class="col-md-4">
            <div class="card p-2 shadow-sm">
                <img src="smartwatch.webp" class="product-img">
                <h5 class="mt-2">Smartwatch</h5>
                <p class="text-muted">â‚¹2999</p>
                <button class="btn btn-dark w-100 addCart"
                    data-id="1"
                    data-name="Smartwatch"
                    data-price="2999"
                    data-img="smartwatch.webp">
                    Add to Cart
                </button>
            </div>
        </div>

       
        <!-- product 6 -->

          <div class="col-md-4">
            <div class="card p-2 shadow-sm">
                <img src="close-up-headphones-detail.jpg" class="product-img">
                <h5 class="mt-2">Head Phones</h5>
                <p class="text-muted">â‚¹599</p>
                <button class="btn btn-dark w-100 addCart"
                    data-id="5"
                    data-name="Head Phones"
                    data-price="1599"
                    data-img="close-up-headphones-detail.jpg">
                    Add to Cart
                </button>
            </div>
        </div>

    </div>
</div>

<!-- SIDE CART -->
<div id="sideCart" class="side-cart">
    <div class="cart-header">
        <h5>My Cart</h5>
        <button id="closeCart" class="btn btn-sm btn-light">âœ–</button>
    </div>

    <div id="cartItems" class="cart-items"></div>

    <div class="cart-footer">
        <h6>Total: â‚¹<span id="total">0</span></h6>
        <button class="btn btn-success w-100 mt-2">Checkout</button>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    const cartBtn = document.getElementById("cartBtn");
    const sideCart = document.getElementById("sideCart");
    const closeCart = document.getElementById("closeCart");
    const cartItems = document.getElementById("cartItems");
    const totalEl = document.getElementById("total");
    const cartCount = document.getElementById("cartCount");

    // Toggle cart
    cartBtn.addEventListener("click", ()=>{
        sideCart.classList.toggle("active");
    });

    closeCart.addEventListener("click", ()=>{
        sideCart.classList.remove("active");
    });

    // Add to cart
    document.querySelectorAll(".addCart").forEach(btn=>{
        btn.addEventListener("click", ()=>{
            const id = btn.dataset.id;
            const name = btn.dataset.name;
            const price = Number(btn.dataset.price);
            const img = btn.dataset.img;

            const found = cart.find(item=>item.id==id);

            if(found){
                found.qty++;
            }else{
                cart.push({id,name,price,img,qty:1});
            }

            saveCart();
            sideCart.classList.add("active");
        });
    });

    function renderCart(){
        cartItems.innerHTML="";
        let total=0, count=0;

        if(cart.length===0){
            cartItems.innerHTML=`<p class="text-center text-muted mt-4">Cart empty hai</p>`;
        }

        cart.forEach((item,index)=>{
            total+=item.price*item.qty;
            count+=item.qty;

            cartItems.innerHTML+=`
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="d-flex gap-2">
                    <img src="${item.img}" class="cart-img">
                    <div>
                        <strong>${item.name}</strong><br>
                        â‚¹${item.price}
                    </div>
                </div>
                <div class="text-end">
                    <div class="d-flex gap-1 mb-1">
                        <button class="btn btn-outline-dark qty-btn" onclick="changeQty(${index},-1)">-</button>
                        <span>${item.qty}</span>
                        <button class="btn btn-outline-dark qty-btn" onclick="changeQty(${index},1)">+</button>
                    </div>
                    <button class="btn btn-sm btn-danger" onclick="removeItem(${index})">ðŸ—‘</button>
                </div>
            </div>`;
        });

        totalEl.innerText=total;
        cartCount.innerText=count;
    }

    window.changeQty=function(index,val){
        cart[index].qty+=val;
        if(cart[index].qty<=0){
            cart.splice(index,1);
        }
        saveCart();
    }

    window.removeItem=function(index){
        cart.splice(index,1);
        saveCart();
    }

    function saveCart(){
        localStorage.setItem("cart",JSON.stringify(cart));
        renderCart();
    }

    renderCart();
});
</script>

</body>
</html>
